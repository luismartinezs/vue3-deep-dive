<style>
  .red {
    color: red;
  }
  .green {
    color: green;
  }
</style>

<div id="app"></div>

<script>
  function h(tag, props, children) {
    return {
      tag,
      props,
      children,
    };
  }

  function mount(vnode, container) {
    // create tag
    const el = (vnode.el = document.createElement(vnode.tag));
    // set any props as attrs
    if (vnode.props) {
      Object.entries(vnode.props).forEach(([attr, val]) =>
        el.setAttribute(attr, val)
      );
    }
    // recursively do the same on children
    if (vnode.children) {
      if (typeof vnode.children === "string") {
        el.textContent = vnode.children;
      } else {
        vnode.children.forEach((child) => {
          mount(child, el);
        });
      }
    }
    // append children to tag el
    container.appendChild(el);
  }

  // update DOM with minimal changes
  function patch(n1, n2) {
   if (n1.tag === n2.tag) {
     const el = n2.el = n1.el
     // props
     const oldProps = n1.props || {}
     const newProps = n2.props || {}

     Object.entries(newProps).forEach(([key, newVal]) => {
       const oldVal = oldProps[key]
       if (newVal !== oldVal) {
         el.setAttribute(key, newVal)
       }
     })

     Object.keys(oldProps).forEach(key => {
       if (!key in newProps) {
         el.removeAttribute(key)
       }
     })

    //  children
    // rather complex part, I don't want to type it in
    // Look at it here https://codepen.io/GreggPollack/pen/MWavQme?editors=1000
   } else { 
     // replace
   }
  }

  const vdom = h("div", { class: "red" }, [
    h("span", null, "hello"),
    h("span", { id: "child" }, [
      h("div", { style: "color: red;" }, "I am the best"),
      h("span", null, "I am the second best"),
    ]),
  ]);

  const vdom2 = h("div", { class: "green" }, [
    h("span", null, "hello"),
    h("span", { id: "child" }, [
      h("div", { style: "color: red;" }, "I am the best"),
      h("span", { class: "green" }, "I am new"),
    ]),
  ]);

  mount(vdom, document.getElementById("app"));

  patch(vdom, vdom2);
</script>
